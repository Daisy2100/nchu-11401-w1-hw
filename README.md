# 數位影像處理程式設計作業集

這個專案包含了數位影像處理課程的程式設計作業實作，涵蓋影像取樣量化、邏輯運算、透視轉換、影像銳化以及降噪等主題。

## 📁 專案結構

```
nchu-11401-w1-hw/
├── HW1/          # 莫列波紋與偽輪廓
├── HW2/          # 影像邏輯運算
├── HW3/          # 透視轉換
├── HW4/          # 影像銳化
├── 作業說明.txt   # 作業要求說明
└── README.md     # 本說明文件
```

## 🔧 環境需求

- Python 3.x
- OpenCV (`cv2`)
- NumPy
- Matplotlib

### 安裝相依套件

```bash
pip install opencv-python numpy matplotlib
```

## 📝 作業說明

### HW1: 莫列波紋與偽輪廓 (Moiré Patterns & False Contours)

**目標**：展示數位影像創建過程中因取樣不足和量化不足所造成的偽影現象。

**實作內容**：
- **Part 1 - 莫列波紋 (Moiré Patterns)**
  - 建立高頻率的正弦波線條圖案 (512×512, 頻率=100)
  - 模擬取樣不足：將影像縮小 4 倍後再放大回原尺寸
  - 使用最近鄰插值法使混疊效果更明顯
  
- **Part 2 - 偽輪廓 (False Contours)**
  - 建立平滑的灰階漸層影像 (512×256)
  - 模擬量化不足：將 256 階灰階壓縮至 4 階
  - 展示明顯的帶狀偽輪廓效果

**執行方式**：
```bash
cd HW1
python main.py
```

**輸出檔案**：
- `original_pattern.png` - 原始高頻圖案
- `moire_artifact.png` - 莫列波紋結果
- `original_gradient.png` - 原始漸層影像
- `false_contour_artifact.png` - 偽輪廓結果

---

### HW2: 影像邏輯運算 (Logical AND & Union Operations)

**目標**：手動實作兩張影像間的邏輯 AND（交集）和 Union（聯集）運算。

**實作內容**：
- 建立兩張 300×300 的二元影像
  - 影像 1：白色矩形 (50,50) 至 (200,200)
  - 影像 2：白色圓形，圓心 (175,175)，半徑 100
- **手動實作邏輯運算**（不使用 OpenCV 的 `bitwise` 函式）
  - 使用雙層 for 迴圈逐像素處理
  - AND 運算：兩個像素都是 255 時才為 255
  - Union 運算：任一像素是 255 時就為 255

**執行方式**：
```bash
cd HW2
python main.py
```

**輸出檔案**：
- `hw2_img1_rect.png` - 矩形影像
- `hw2_img2_circle.png` - 圓形影像
- `hw2_manual_and.png` - AND 運算結果
- `hw2_manual_union.png` - Union 運算結果

---

### HW3: 透視轉換 (Perspective Transformation)

**目標**：使用 8 參數空間轉換模型實作透視轉換。

**實作內容**：
- 建立一個帶有歪斜四邊形的範例影像 (400×400)
- **手動求解 8 參數透視轉換矩陣**
  - 定義來源點（歪斜四邊形的四個角）
  - 定義目標點（標準矩形的四個角，300×200）
  - 建立線性系統 Ah = b (8×8 矩陣)
  - 使用 NumPy 求解線性方程式得到 8 參數
  - 重建 3×3 的齊次變換矩陣 H
- 驗證手動計算的 H 矩陣與 OpenCV 的結果一致性
- 套用變換矩陣進行影像校正

**執行方式**：
```bash
cd HW3
python main.py
```

**輸出檔案**：
- `hw3_original.png` - 原始歪斜影像
- `hw3_warped.png` - 透視校正後的影像

**數學原理**：
```
對於每個點對 (x, y) -> (x', y')：
x' = (h1*x + h2*y + h3) / (h7*x + h8*y + 1)
y' = (h4*x + h5*y + h6) / (h7*x + h8*y + 1)

轉換為線性系統：
[x, y, 1, 0, 0, 0, -x*x', -y*x'] * [h1...h8]^T = x'
[0, 0, 0, x, y, 1, -x*y', -y*y'] * [h1...h8]^T = y'
```

---

### HW4: 影像銳化 (Image Sharpening)

**目標**：基於拉普拉斯運算子和梯度遮罩實作影像銳化技術。

**要求**：
- 手動實作梯度計算和卷積運算
- 包含適當的零填充 (Zero-padding)
- **禁止使用內建的卷積 API**

**實作技術**：
1. **拉普拉斯運算子 (Laplacian Operator)**
   - 使用二階微分偵測邊緣
   - 常用遮罩：
     ```
     [ 0 -1  0]    [-1 -1 -1]
     [-1  4 -1]    [-1  8 -1]
     [ 0 -1  0]    [-1 -1 -1]
     ```

2. **梯度遮罩 (Gradient-based Masks)**
   - Sobel 運算子（X 方向和 Y 方向）
   - Prewitt 運算子
   - Robert 運算子

**執行方式**：
```bash
cd HW4
python main.py
```

**狀態**：🚧 開發中

---

### HW5: 高斯降噪 (Gaussian Noise Reduction)

**目標**：實作多種濾波器以降低影像中的高斯雜訊。

**實作內容**：
1. **手動加入高斯雜訊**到乾淨影像
2. **實作並比較以下降噪方法**：
   - (a) **均值濾波器 (Mean Filter)** - 手動實作
   - (b) **適應性局部降噪濾波器 (Adaptive Local Noise Reduction Filter)** - 手動實作
   - (c) **非局部平均濾波器 (Non-Local Means Filter)** - 可使用現有函式庫
   - (d) **邊緣保留濾波器 - 雙邊濾波器 (Bilateral Filter)** - 選做，可使用現有函式庫

3. **效能評估**：
   - 使用 PSNR (Peak Signal-to-Noise Ratio) 作為量化指標
   - 比較各方法的降噪效能

**PSNR 計算公式**：
```
MSE = (1/MN) * Σ[I(i,j) - K(i,j)]²
PSNR = 10 * log₁₀(MAX²/MSE)
```
其中 MAX 為影像的最大可能像素值（8-bit 影像為 255）

**狀態**：📋 待開發

---

## 🎯 作業繳交格式

**檔名格式**：`學號_作業編號_版本`

範例：
- `7113056022_HW1_v1`
- `7113056022_HW1_v2`（修正版）

**繳交內容**：
1. 主要演算法與程式片段
2. 測試資料與結果
3. 簡短的討論或結論
4. Word 電子檔書面報告
5. 程式 Source code
6. 相關測試資料

**注意事項**：
- 上傳後的作業無法刪除及修改
- 若要修改作業，請直接上傳新版本
- 評分以最後一個版本為主
- 請以 WinZip 或 WinRAR 壓縮後上傳

---

## 📊 作業完成進度

| 作業 | 主題 | 狀態 | 說明 |
|------|------|------|------|
| HW1 | 莫列波紋與偽輪廓 | ✅ 完成 | 已實作取樣與量化不足的偽影展示 |
| HW2 | 影像邏輯運算 | ✅ 完成 | 已手動實作 AND 和 Union 運算 |
| HW3 | 透視轉換 | ✅ 完成 | 已實作 8 參數模型與矩陣求解 |
| HW4 | 影像銳化 | 🚧 開發中 | 待實作拉普拉斯與梯度遮罩 |
| HW5 | 高斯降噪 | 📋 規劃中 | 待實作多種濾波器與 PSNR 評估 |

---

## 🔬 學習重點

### 核心概念
- **取樣與量化**：理解數位化過程中的限制與偽影
- **影像代數運算**：逐像素的邏輯與算術操作
- **幾何轉換**：齊次座標與空間變換矩陣
- **影像增強**：頻率域與空間域的銳化技術
- **影像濾波**：空間域濾波器的設計與實作

### 實作技巧
- 手動實作演算法以深入理解原理
- 適當的零填充處理邊界問題
- 視覺化結果驗證正確性
- 量化指標評估演算法效能

---

## 📚 參考資源

- Digital Image Processing (Gonzalez & Woods)
- OpenCV Documentation: https://docs.opencv.org/
- NumPy Documentation: https://numpy.org/doc/

---

## 👨‍💻 作者

國立中興大學 - 數位影像處理課程作業

---

## 📝 授權

本專案僅供學習用途使用。

---

**最後更新**：2025年11月16日
